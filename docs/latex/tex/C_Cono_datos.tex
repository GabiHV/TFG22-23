\apendice{Comprensión de los datos}

\section{Introducción}
En la etapa de comprensión de los datos se creará el conjunto inicial y se comprobará
si es adecuado, para, en caso contrario, poder continuar la recopilación.

Los plazos del proyecto impiden realizar esta fase en toda su extensión, puesto que
a pesar de ser el proceso de análisis de datos un proceso iterativo, se encuentra 
sujeto a entregas inamovibles.

\section{Descripción de los datos}
Se proporciona un conjunto de datos compuesto por varios sensores (en concreto 8 
sensores \textit{IoT}) y un pluviómetro desplegados en un viñedo.

Los datos de los sensores proporcionados cuentan con los siguientes atributos:

\tablaSmallSinColores{Atributos de los datos: sensores}{m{5em} m{15em} m{10em}}{Atributos sensores}{\textbf{Atributo} & \textbf{Descripción}  & \textbf{Medida} \\}
{
ts          & \textit{Timestamp} de la muestra                    & ms \\
fecha       & Fecha de la muestra                                 & Fecha en formato yy/mm/dd, hh:mm:ss \\
batería     & Nivel de batería del sensor                         & V \\
t\_ext      & Temperatura ambiental                               & ºC \\
h\_ext      & Humedad ambiental                                   & \% \\
t\_C\_cal   & Temperatura superficial a 20cm.                     & ºC \\
h\_C\_cal   & Humedad superficial a 20cm.                         & \% \\
t\_L\_cal   & Temperatura a profundidad mayor a t\_C\_cal         & ºC \\
h\_L\_cal   & Humedad superficial a profundiad mayor a h\_C\_cal  & \% \\
h\_C        & Humedad superficial sin calibrar                    & Valor relacionado con capacitancias \\
h\_L        & Humedad profunda sin calibrar                       & Valor relacionado con capacitancias \\
}

Los datos del pluviómetro cuentan con los siguientes atributos:
\tablaSmallSinColores{Atributos de los datos: pluviómetro}{m{7em} m{13em} m{10em}}{Atributos pluviómetro}{\textbf{Atributo} & \textbf{Descripción}  & \textbf{Medida} \\}
{
ts              & \textit{Timestamp} de la muestra                      & ms \\
fecha           & Fecha de la muestra                                   & Fecha en formato yy/mm/dd, hh:mm:ss \\
batería         & Nivel de batería del sensor                           & V \\
pluv            & Contador del incremento de activación del balancín    & N/A \\
pluv\_delta     & Incremento de activación del balancín                 & N/A \\
pluv\_deltaMM   & Precipitaciones registradas desde la última lectura   & litros/\(m^2\) \\
}

\section{Visualización de los datos}
Para dar una idea del estado de los datos se proporcionan unas gráficas de dispersión
con las lecturas realizadas en cada uno de los sensores y el pluviómetro.
En estas podrán observarse los valores \textbf{sin procesar} de cada atributo 
en función del tiempo.

En el caso de los sensores, los atributos \textit{h\_C} y \textit{h\_L} se obviarán debido
a que se tratan de datos redundantes con las respectivas humedades calibradas. 
De igual manera, los valores de batería y fecha tampoco se emplearán en la creación de las gráficas,
puesto que no aportan información útil para los objetivos del proyecto más allá de posibles
errores de muestreo.

\subsection{Sensor 1}

% Sensor 1
\imagen{raw_data/sensor1.png}{Datos no procesados: sensor 1}{1}

En el primer sensor, como puede observarse en la Figura \ref{fig:raw_data/sensor1.png},
se encuentran varias situaciones que a \textit{priori} son sencillas de solucionar, 
puesto que existe una cantidad importante de muestras para las que no se cuentan con datos,
además de valores claramente inverosímiles (como en el caso de la humedad
más profunda, o el aumento tan repentino de la humedad superficial).
A pesar de esto, el resto parecen encontrarse dentro de la normalidad, por lo que
las labores en el sensor mencionado serán de las menos tediosas.

Los aumentos tan repentinos como los observados en la imágen posteriormente se demostraron
que eran debidos al agotamiento de la batería, que poco antes
de producirse provocaba que las sondas arrojaran valores artificiales para luego realizar lecturas nulas.

\subsection{Sensor 2}

% Sensor 2
\imagen{raw_data/sensor2.png}{Datos no procesados: sensor 2}{1}

En el segundo caso, además de las muestras para las que no se cuenta con valores,
el la Figura \ref{fig:raw_data/sensor2.png} se observa cómo llegado un instante en
las sondas de temperatura y humedad superficiales se comienzan a realizar lecturas
muy variadas a lo largo del tiempo, para posteriormente dejar de producir datos.

Además, puede observarse la presencia de cierto ruido durante los muestreos previos
al suceso mencionado en las sondas de humedad, lo que posiblemente sea debido a 
las sus capacitancias.

\newpage
\subsection{Sensor 3}

% Sensor 3
\imagen{raw_data/sensor3.png}{Datos no procesados: sensor 3}{1}

En este sensor, como puede apreciarse en la Figura \ref{fig:raw_data/sensor3.png},
además de los muestras para los que no tenemos valores (que será la tónica habitual
en el conjunto de datos), existen aumentos remarcables en las humedades, con unas
bajadas que pueden considerarse aceleradas o repentinas.

La mayor parte de estas son genuinas y debidas a las lluvias contrastadas esos días, sin 
embargo, la última de las subidas se observa contextualmente errónea, provocando 
un cambio brusco en ambas humedades del suelo.

\newpage
\subsection{Sensor 4}

% Sensor 4
\imagen{raw_data/sensor4.png}{Datos no procesados: sensor 4}{1}

En este caso, pueden observarse en la Figura \ref{fig:raw_data/sensor4.png}, diferentes
situaciones. La primera de ellas, como en el resto de sensores son los valores faltantes; la
segunda es el ruido existente en ciertos periodos de tiempo.

Tras esta situación, puede apreciarse cómo la variabilidad de las muestras
aumenta de forma homogénea en todas y cada una de las sondas, a salvedad de las que recogen
valores ambientales.

Las posteriores investigaciones indicaron que el sensor había sido desplazado
de su emplazamiento inicial.

\newpage
\subsection{Sensor 5}

% Sensor 5
\imagen{raw_data/sensor5.png}{Datos no procesados: sensor 5}{1}

En la Figura \ref{fig:raw_data/sensor5.png} puede observarse diferentes situaciones.
Una de ellas es la repetida falta de valores para algunos instantes de tiempo; la 
segunda son las aparentes aumentos repentinos de humedades.

Estos siguen el mismo patrón en todas las situaciones: incremento que puede clasificarse
como repentino, y un descenso moderado a lo largo del tiempo.
De esta forma, todos se contrastaron como genuinos observando ciertos parámetros como
el tiempo atmosférico en los instantes de subida.

Este sensor se trata de uno con el conjunto de datos más limpios de forma predefinida, 
sino el que en mejor estado se encuentra.

\newpage
\subsection{Sensor 6}

% Sensor 6
\imagen{raw_data/sensor6.png}{Datos no procesados: sensor 6}{1}

En el conjunto de datos que se puede observar en la Figura \ref{fig:raw_data/sensor6.png},
al igual que en los sensores anteriores, existen valores faltantes, además de 
otras situaciones.

Una de ellas es la presencia generalizada de ruido en las lecturas
de las sondas que miden variables del suelo.

Por otro lado, en un instante de tiempo las humedades aumentan de forma repentina, posiblemente
por la lluvia, sin embargo, en la humedad del suelo a mayor profundidad, hay una variabilidad
que se consideró como irrecuperable por su estado.

\newpage
\subsection{Sensor 7}

% Sensor 7
\imagen{raw_data/sensor7.png}{Datos no procesados: sensor 7}{1}

En este caso pueden apreciarse en la Figura \ref{fig:raw_data/sensor7.png} diferentes
situaciones, además de la falta de valores en algunas muestras ya mencionada en el 
resto de sensores.

En primer lugar, en las sondas de humedad no ambientales se comienza a producir un aumento
que podría considerarse como exponencial en el tiempo debido al agotamiento de la batería.

En segundo lugar, al igual que en el sensor 4, se observa un incremento significativo de la variabilidad
de la temperatura del suelo, produciéndose, además, un aumento de las lecturas en la sonda de
humedad más profunda.

De igual manera que en el sensor mencionado, las labores en los cultivos habían provocado un
cambio en el emplazamiento original del sensor, lo que producía las situaciones mencionadas.
Con respecto a la falta de los datos de humedad y temperatura más superficiales se 
comprobará que fue debida a la rotura de las respectivas sondas.

\newpage
\subsection{Sensor 8}

% Sensor 8
\imagen{raw_data/sensor8.png}{Datos no procesados: sensor 8}{1}

Como puede observarse en la figura \ref{fig:raw_data/sensor8.png}, en este caso existen 
múltiples problemas en el conjunto de datos.

En primer lugar, los ya mencionados valores faltantes en diferentes instantes de tiempo.
En segundo término, los aumentos de temperatura debidos al agotamiento de la batería y finalmente
la alta variabilidad en las temperaturas, que por otro lado, se asemejan en gran medida a la situación 
del sensor 4,
lo que indica que de nuevo las sondas habían sido desplazadas de su emplazamiento original.

Este será uno de los sensores con el conjunto de datos con más problemas de todos los 
expuestos anteriormente, encontrándose de igual forma con incidencias continuas por los niveles
de batería.

\newpage
\subsection{Pluviómetro}

% Pluviómetro
\imagen{raw_data/pluviometro.png}{Datos no procesados: pluviómetro}{1}

En el caso del pluviómetro, los datos estarán sujetos a erróneas debido a su forma
de fijación, puesto que las ráfagas de viento producían oscilaciones
en el poste al que se encontraba anclado, de modo que se realizaban lecturas incorrectas
en las precipitaciones.
